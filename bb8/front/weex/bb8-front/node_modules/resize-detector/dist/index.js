!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.resizeDetector={})}(this,function(e){"use strict";var t=null;var i=null;var r=["Webkit","Moz","O","ms"],n=["webkitAnimationStart","animationstart","oAnimationStart","MSAnimationStart"],s=null;function o(){if(!s){var e=document.createElement("div");return void 0!==e.style.animation?s={property:"animation",startEvent:"animationstart",keyframes:"keyframes"}:(r.some(function(t,i){var r=t+"Animation";if(void 0!==e.style[r])return s={property:r,startEvent:n[i],keyframes:"-"+t.toLowerCase()+"-keyframes"},!0}),s)}}function _(e,t){void 0===t&&(t={});var i=document.createElement(e);return Object.keys(t).forEach(function(e){i[e]=t[e]}),i}var a='.resize-triggers{visibility:hidden;opacity:0}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',l=0,d=null,c="resize-attach";function f(){var e,r,n=this;u(this),this.__resize_raf__&&(e=this.__resize_raf__,i||(i=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),i(e)),this.__resize_raf__=(r=function(){var e,t,i,r;t=(e=n).__resize_last__,i=t.width,r=t.height,(e.offsetWidth!==i||e.offsetHeight!==r)&&(n.__resize_last__.width=n.offsetWidth,n.__resize_last__.height=n.offsetHeight,h(n))},t||(t=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),t(r))}function h(e){e.__resize_skip___?e.__resize_skip___=!1:e.__resize_listeners__.forEach(function(t){t.call(e)})}function u(e){var t=e.__resize_triggers__,i=t.expand,r=t.expandChild,n=t.contract;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,r.style.width=i.offsetWidth+1+"px",r.style.height=i.offsetHeight+1+"px",i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight}e.addListener=function(e,t){if(e.attachEvent)e.attachEvent("onresize",t);else{if(!e.__resize_listeners__){if(e.__resize_listeners__=[],window.ResizeObserver){var i=new ResizeObserver(function(){h(e)});i.observe(e),e.__resize_observer__=i}else l||(d=function(){var e,t,i=o(),r="";if(i){var n=i.property,s=i.keyframes;r="@"+s+" "+c+"{0%:{opacity:0;}to:{opacity:0}}.resize-triggers{"+n+":1ms "+c+"}"}return e=r+=a,(t=document.createElement("style")).type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}()),function(e){var t=getComputedStyle(e).position;"static"===t&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var i=_("div",{className:"resize-triggers"}),r=_("div",{className:"resize-expand-trigger"}),n=_("div"),s=_("div",{className:"resize-contract-trigger"});r.appendChild(n),i.appendChild(r),i.appendChild(s),e.appendChild(i),e.__resize_triggers__={triggers:i,expand:r,expandChild:n,contract:s},u(e),e.addEventListener("scroll",f,!0);var a=(o()||{}).startEvent;a&&i.addEventListener(a,function(t){var i=t.animationName;i===c&&u(e)})}(e);e.__resize_skip___=!!o()}e.__resize_listeners__.push(t),l++}},e.removeListener=function(e,t){if(e.detachEvent)e.detachEvent("onresize",t);else{var i=e.__resize_listeners__;i.splice(i.indexOf(t),1),i.length||(e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__=null):(e.removeEventListener("scroll",t),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null,e.__resize_listeners__=null)),!--l&&d&&d.parentNode.removeChild(d)}},Object.defineProperty(e,"__esModule",{value:!0})});
